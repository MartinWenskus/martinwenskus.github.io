(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[7],{"21db":function(t,e,o){"use strict";o.r(e);var a=function(){var t=this,e=t.$createElement,o=t._self._c||e;return t.currentUser?o("div",{staticClass:"user-settings full-width"},[o("q-form",{staticClass:"full-height",on:{submit:t.saveUserData}},[o("div",{staticClass:"background-photo"},[t.showBackgroundPhoto()?o("div",{staticClass:"default-background"},[o("q-img",{staticStyle:{height:"200px"},attrs:{src:"https://cdn.quasar.dev/img/material.png"},on:{click:function(e){return t.showPhotoUpload("background")}}})],1):o("div",{staticClass:"user-background"},[o("q-img",{staticStyle:{height:"200px"},attrs:{src:t.currentUser.backgroundPhoto},on:{click:function(e){return t.showPhotoUpload("background")}}})],1)]),o("div",{staticClass:"absolute-top q-mt-sm text-white text-center"},[o("q-icon",{staticClass:"q-mr-sm",attrs:{color:"white",name:"edit",size:"20px"},on:{click:function(e){return t.showPhotoUpload("profile")}}}),t._v("Edit your background image\n    ")],1),o("div",{staticClass:"profile-photo text-center",on:{click:function(e){return t.showPhotoUpload("profile")}}},[t.showDefaultPhoto()?o("div",{staticClass:"default-user-image column items-center"},[o("q-avatar",{staticClass:"q-mb-sm",attrs:{round:"round",color:"blue-grey-10",icon:"person","font-size":"110px",size:"180px","text-color":"white"}}),o("span",{staticClass:"text-caption text-blue-grey-10"},[t._v("Click to edit")])],1):o("div",{staticClass:"user-image column items-center"},[o("q-avatar",{staticClass:"q-mb-sm shadow-5",attrs:{size:"180px"},on:{click:function(e){return t.showPhotoUpload("profile")}}},[o("q-img",{attrs:{src:t.currentUser.profilePhoto}})],1),o("span",{staticClass:"text-blue-grey-10"},[o("q-icon",{staticClass:"q-mr-sm",attrs:{color:"blue-grey-10",name:"edit",size:"16px"}}),t._v("Click to edit")],1)],1)]),o("section",{staticClass:"user-info"},[o("h6",{staticClass:"q-mt-none q-mb-md text-center"},[t._v("Edit Your Profile")]),o("div",{staticClass:"row justify-between items-center q-mb-lg"},[o("label",{staticClass:"col-3",attrs:{for:"fullName"}},[t._v("Name")]),o("q-input",{staticClass:"col",attrs:{id:"fullName",borderless:"borderless",dense:"dense",type:"text"},model:{value:t.fullName,callback:function(e){t.fullName=e},expression:"fullName"}})],1),o("div",{staticClass:"row justify-between items-center q-mb-lg"},[o("label",{staticClass:"col-3",attrs:{for:"charactername"}},[t._v("Character Name")]),o("q-input",{staticClass:"col",attrs:{id:"charactername",borderless:"borderless",dense:"dense",type:"text"},model:{value:t.charactername,callback:function(e){t.charactername=e},expression:"charactername"}})],1)]),o("div",{staticClass:"row justify-between q-my-lg q-px-md absolute-bottom"},[o("q-btn",{staticStyle:{"min-width":"6em"},attrs:{color:"primary",label:"CANCEL"},on:{click:function(e){return t.setEditUserDialog(!1)}}}),o("q-btn",{staticStyle:{"min-width":"6em"},attrs:{color:"primary",type:"submit",label:"SAVE"}})],1)]),o("q-dialog",{attrs:{"transition-hide":"scale","transition-show":"scale"},on:{"before-hide":t.resetPhotoType},model:{value:t.photoUpload,callback:function(e){t.photoUpload=e},expression:"photoUpload"}},[o("fbq-uploader",{staticClass:"q-my-lg",attrs:{label:"Please Upload a Photo",meta:t.meta,prefixPath:t.prefixPath},on:{uploaded:t.uploadComplete}})],1)],1):t._e()},r=[],s=(o("8e6e"),o("8a81"),o("ac6a"),o("cadf"),o("06db"),o("456d"),o("967e")),n=o.n(s),i=(o("96cf"),o("fa84")),c=o.n(i),l=o("c47a"),u=o.n(l),p=o("2f62"),h=o("3a82");function d(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.push.apply(o,a)}return o}function m(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?d(Object(o),!0).forEach((function(e){u()(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):d(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}var f={name:"UserSettings",mixins:[h["a"]],components:{"fbq-uploader":function(){return o.e(9).then(o.bind(null,"d151"))}},data:function(){var t=this.$store.state.user.currentUser;return{email:t.email,fullName:t.fullName,charactername:t.charactername,photoType:"",photoUpload:!1}},computed:m({},Object(p["c"])("user",["currentUser"]),{meta:function(){return{id:this.currentUser.id,photoType:this.photoType}},prefixPath:function(){var t=this.currentUser.id,e="".concat(t,"/").concat(this.photoType,"Photo/").concat(this.photoType,"Photo.");return e}}),methods:m({},Object(p["d"])("user",["setEditUserDialog"]),{},Object(p["b"])("user",["updateUserData"]),{resetPhotoType:function(){this.photoType=""},saveUserData:function(){var t=this;return c()(n.a.mark((function e(){var o,a;return n.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return o=t.fullName,a=t.charactername,t.$q.loading.show({message:"Updating your data, please stand by...",customClass:"text-h3, text-bold"}),e.prev=2,e.next=5,t.$store.commit("user/changeCurrentUserData",{fullName:o,charactername:a});case 5:e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](2),t.$q.notify({message:"Looks like a problem updating your profile: ".concat(e.t0),color:"negative"});case 10:return e.prev=10,t.$q.loading.hide(),t.setEditUserDialog(!1),e.finish(10);case 14:case"end":return e.stop()}}),e,null,[[2,7,10,14]])})))()},showBackgroundPhoto:function(){return""===this.currentUser.backgroundPhoto||null===this.currentUser.backgroundPhoto||void 0===this.currentUser.backgroundPhoto},showDefaultPhoto:function(){return""===this.currentUser.profilePhoto||null===this.currentUser.profilePhoto||void 0===this.currentUser.profilePhoto},showPhotoUpload:function(t){this.photoUpload=!0,this.photoType=t},uploadComplete:function(t){var e=[];t.files.forEach((function(t){return e.push(t)})),this.photoUpload=!1,this.$q.notify({message:"Successfully uploaded your photo: ".concat(e),color:"positive"})}})},b=f,g=(o("d707"),o("2877")),v=o("eebe"),y=o.n(v),w=o("0378"),P=o("068f"),U=o("0016"),C=o("cb32"),q=o("27f9"),x=o("9c40"),k=o("24e8"),O=o("ee89"),j=Object(g["a"])(b,a,r,!1,null,null,null);e["default"]=j.exports;y()(j,"components",{QForm:w["a"],QImg:P["a"],QIcon:U["a"],QAvatar:C["a"],QInput:q["a"],QBtn:x["a"],QDialog:k["a"],QUploader:O["a"]})},d707:function(t,e,o){"use strict";var a=o("e1a8"),r=o.n(a);r.a},e1a8:function(t,e,o){}}]);